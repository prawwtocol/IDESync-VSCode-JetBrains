<idea-plugin require-restart="false">
    <id>com.vscode.jetbrainssync</id>
    <name>IDE Sync - Connect to VSCode (Cmd+I)</name>
    <vendor>Secret</vendor>
    <description><![CDATA[
        <h2>IDE Sync - VSCode-JetBrains Sync</h2>
        <p>Synchronizes a JetBrains IDE with a Visual Studio Code IDE, enabling seamless navigation between both editors. </p>
        <p>This synchronization system is suitable for VSCode, VSCode forks like Cursor or Windsurf as well as JetBrains IntelliJ-based IDEs like Rider, IntelliJ IDEA, and WebStorm.</p>

        <h3>Features</h3>
        <ul>
            <li>Automatic cursor position synchronization</li>
            <li>Automatic active file synchronization</li>
            <li>Easy configuration through settings</li>
        </ul>

        <h3>Installation</h3>
        <ol>
            <li>Install the JetBrains plugin in JetBrains IDE called "IDE Sync - Connect to VSCode"</li>
            <li>Install the corresponding VS Code extension called "IDE Sync - Connect to JetBrains IDE"</li>
        </ol>

        <h3>Usage</h3>
        <ol>
            <li>After installation, you'll find a toggle button in the JetBrains IDE status bar</li>
            <li>Click the button to enable/disable synchronization</li>
            <li>The button shows the current status:
                <ul>
                    <li>"Turn IDE Sync On" - Sync disabled</li>
                    <li>"IDE Sync On" - Sync enabled</li>
                </ul>
            </li>
        </ol>

        <h3>Configuration</h3>
        <p>You can adjust the WebSocket port in the settings:</p>
        <ul>
            <li>Open JetBrains IDE settings</li>
            <li>Search for "IDE Sync - Connect to VSCode"</li>
            <li>Adjust the port (default: 3000)</li>
        </ul>

        <h3>Troubleshooting</h3>
        <p>If you can't establish a connection:</p>
        <ul>
            <li>Make sure both plugins are installed</li>
            <li>Check if the IDE Sync is turned on in both IDEs</li>
            <li>Verify that the port settings match in both plugins</li>
            <li>Restart both editors</li>
        </ul>

        <h3>Feedback & Issues</h3>
        <p>Please report issues or suggestions on <a href="https://github.com/secret/IDESync-VSCode-JetBrains/issues">GitHub</a>.</p>
    ]]></description>
    <depends>com.intellij.modules.platform</depends>
    <change-notes><![CDATA[
        <h3>Version 1.3.2</h3>
        <ul>
            <li>Keyboard shortcut changed to Cmd+I / Ctrl+I (without Shift)</li>
            <li>Added Aerospace window manager support for better multi-window handling</li>
        </ul>
        <h3>Version 1.2.0</h3>
        <ul>
            <li>New architecture: Discovery port 3000 for multi-pair support</li>
            <li>Auto port assignment for each IDE pair (3001, 3002, etc.)</li>
            <li>Multiple IDE pairs can now connect simultaneously</li>
        </ul>
        <h3>Version 1.1.4</h3>
        <ul>
            <li>Fixed focus request handling on macOS using AppleScript</li>
            <li>Fixed keyboard shortcut for macOS (changed keymap to "Mac OS X 10.5+")</li>
        </ul>
        <h3>Version 1.1.3</h3>
        <ul>
            <li>Log directory fallback to extension storage</li>
        </ul>
        <h3>Version 1.1.2</h3>
        <ul>
            <li>Keyboard shortcut changed to Cmd+Shift+I / Ctrl+Shift+I</li>
        </ul>
        <h3>Version 1.1.1</h3>
        <ul>
            <li>File logging to ~/.ide-sync/debug_port{N}_{timestamp}.log</li>
            <li>Cmd-I switch sync improvements</li>
        </ul>
        <h3>Version 1.1.0</h3>
        <ul>
            <li>Files in the VSCode extension now always open in non-preview mode</li>
        </ul>
    ]]></change-notes>
    <extensions defaultExtensionNs="com.intellij">
        <postStartupActivity implementation="com.vscode.jetbrainssync.VSCodeJetBrainsSyncPlugin"/>
        <projectConfigurable
            instance="com.vscode.jetbrainssync.VSCodeJetBrainsSyncConfigurable"
            displayName="IDE Sync - Connect to VSCode (Cmd+I)"
            id="com.vscode.jetbrainssync.settings"
            parentId="tools"/>
        <notificationGroup id="VSCode JetBrains Sync" displayType="BALLOON"/>
        <statusBarWidgetFactory id="VSCodeJetBrainsSync" implementation="com.vscode.jetbrainssync.SyncStatusBarWidgetFactory"/>
    </extensions>

    <actions>
        <action id="com.vscode.jetbrainssync.SwitchToPairedIDE" class="com.vscode.jetbrainssync.SwitchToPairedIDEAction"
                text="Switch to Paired IDE" description="Switch to paired Cursor/VSCode window">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut first-keystroke="meta I" keymap="Mac OS X"/>
            <keyboard-shortcut first-keystroke="meta I" keymap="Mac OS X 10.5+"/>
            <keyboard-shortcut first-keystroke="ctrl I" keymap="$default"/>
        </action>
    </actions>
</idea-plugin> 